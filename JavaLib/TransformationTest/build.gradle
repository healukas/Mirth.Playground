plugins {
    id 'java'
}

group = 'org.healukas'
version = '0.0.2'

repositories {
    mavenCentral()
}

dependencies {
    implementation 'ca.uhn.hapi.fhir:hapi-fhir-base:5.7.9'
    implementation 'ca.uhn.hapi.fhir:hapi-fhir-structures-dstu2:5.7.9'
    implementation 'ca.uhn.hapi.fhir:hapi-fhir-structures-r4:5.7.9'
    implementation 'ca.uhn.hapi:hapi-base:2.3'
    implementation 'ca.uhn.hapi:hapi-structures-v25:2.3'
}

//jar {
//    archiveBaseName = 'TransformationTest'
//    archiveVersion = '1.2.3'
//    dependsOn(configurations.runtimeClasspath)
//    from{
//        configurations.runtimeClasspath.findAll {it.name.endsWith('jar').collect {zipTree(it)}}
//    }
//}
tasks.register('uberJar', Jar) {
    archiveClassifier = 'uber'
    duplicatesStrategy = DuplicatesStrategy.INCLUDE
    from sourceSets.main.output

    dependsOn configurations.compileClasspath
    dependsOn configurations.runtimeClasspath
    from {
        configurations.compileClasspath.findAll{ it.name.endsWith('jar') }.collect { zipTree(it) }
        configurations.runtimeClasspath.findAll{ it.name.endsWith('jar') }.collect { zipTree(it) }
    }
}

